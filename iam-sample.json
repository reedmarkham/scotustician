{
	"Version": "2012-10-17",
	"Statement": [
		{
			"Sid": "CloudFormationAccess",
			"Effect": "Allow",
			"Action": [
				"cloudformation:DescribeStacks",
				"cloudformation:CreateChangeSet",
				"cloudformation:ExecuteChangeSet",
				"cloudformation:DescribeChangeSet",
				"cloudformation:GetTemplateSummary",
				"cloudformation:DescribeStackEvents",
				"cloudformation:DeleteStack",
				"cloudformation:UpdateStack"
			],
			"Resource": "*"
		},
		{
			"Sid": "CDKBootstrapAssets",
			"Effect": "Allow",
			"Action": [
				"s3:PutObject",
				"s3:GetObject",
				"s3:ListBucket"
			],
			"Resource": [
				"arn:aws:s3:::cdk-sctstcn-assets-<ACCOUNT_ID>-<REGION>",
				"arn:aws:s3:::cdk-sctstcn-assets-<ACCOUNT_ID>-<REGION>/*"
			]
		},
		{
			"Sid": "PassExecutionRole",
			"Effect": "Allow",
			"Action": [
				"iam:PassRole",
				"sts:AssumeRole"
			],
			"Resource": "arn:aws:iam::<ACCOUNT_ID>:role/cdk-sctstcn-cfn-exec-role-*"
		},
		{
			"Sid": "ECSManagement",
			"Effect": "Allow",
			"Action": [
				"ecs:CreateCluster",
				"ecs:DeleteCluster",
				"ecs:DescribeClusters",
				"ecs:CreateService",
				"ecs:UpdateService",
				"ecs:DeleteService",
				"ecs:DescribeServices",
				"ecs:RegisterTaskDefinition",
				"ecs:DeregisterTaskDefinition",
				"ecs:DescribeTaskDefinition",
				"ecs:ListTaskDefinitions",
				"ecs:RunTask",
				"ecs:StopTask",
				"ecs:DescribeTasks",
				"ecs:ListTasks",
				"ecs:ListClusters",
				"ecs:CreateCapacityProvider",
				"ecs:DescribeCapacityProviders",
				"ecs:TagResource",
				"ecs:UntagResource"
			],
			"Resource": "*"
		},
		{
			"Sid": "EC2Management",
			"Effect": "Allow",
			"Action": [
				"ec2:Describe*",
				"ec2:CreateTags",
				"ec2:RunInstances",
				"ec2:StartInstances",
				"ec2:StopInstances",
				"ec2:TerminateInstances",
				"ec2:CreateSecurityGroup",
				"ec2:DeleteSecurityGroup",
				"ec2:AuthorizeSecurityGroupIngress",
				"ec2:AuthorizeSecurityGroupEgress",
				"ec2:RevokeSecurityGroupIngress",
				"ec2:RevokeSecurityGroupEgress",
				"ec2:CreateVpc",
				"ec2:DeleteVpc",
				"ec2:CreateSubnet",
				"ec2:DeleteSubnet",
				"ec2:CreateInternetGateway",
				"ec2:AttachInternetGateway",
				"ec2:DetachInternetGateway",
				"ec2:DeleteInternetGateway",
				"ec2:CreateRouteTable",
				"ec2:DeleteRouteTable",
				"ec2:CreateRoute",
				"ec2:DeleteRoute",
				"ec2:AssociateRouteTable",
				"ec2:DisassociateRouteTable",
				"ec2:CreateVpcEndpoint",
				"ec2:DeleteVpcEndpoint",
				"ec2:ModifyVpcEndpoint"
			],
			"Resource": "*"
		},
		{
			"Sid": "ECRAccess",
			"Effect": "Allow",
			"Action": [
				"ecr:GetAuthorizationToken",
				"ecr:BatchCheckLayerAvailability",
				"ecr:GetDownloadUrlForLayer",
				"ecr:BatchGetImage",
				"ecr:DescribeRepositories"
			],
			"Resource": "*"
		},
		{
			"Sid": "LogGroupManagement",
			"Effect": "Allow",
			"Action": [
				"logs:CreateLogGroup",
				"logs:PutRetentionPolicy",
				"logs:DescribeLogGroups",
				"logs:CreateLogStream",
				"logs:PutLogEvents"
			],
			"Resource": "*"
		},
		{
			"Sid": "SSMParameterAccess",
			"Effect": "Allow",
			"Action": [
				"ssm:GetParameter",
				"ssm:GetParameters",
				"ssm:PutParameter",
				"ssm:DescribeParameters"
			],
			"Resource": "*"
		},
		{
			"Sid": "SecretsManagerAccess",
			"Effect": "Allow",
			"Action": [
				"secretsmanager:GetSecretValue",
				"secretsmanager:DescribeSecret"
			],
			"Resource": [
				"arn:aws:secretsmanager:*:<ACCOUNT_ID>:secret:scotustician-db-credentials*"
			]
		},
		{
			"Sid": "ServiceQuotasAccess",
			"Effect": "Allow",
			"Action": [
				"servicequotas:GetServiceQuota",
				"servicequotas:ListServiceQuotas",
				"servicequotas:ListRequestedServiceQuotaChangeHistoryByQuota",
				"servicequotas:RequestServiceQuotaIncrease"
			],
			"Resource": "*"
		},
		{
			"Sid": "AllowPassRoleForScotusticianTasks",
			"Effect": "Allow",
			"Action": [
				"iam:PassRole"
			],
			"Resource": [
				"arn:aws:iam::<ACCOUNT_ID>:role/ScotusticianIngestStack-IngestTaskDef*",
				"arn:aws:iam::<ACCOUNT_ID>:role/ScotusticianTransformersS-TransformersCpuTaskDef*"
			]
		},
		{
			"Sid": "AllowDetachNetworkInterface",
			"Effect": "Allow",
			"Action": [
				"ec2:DetachNetworkInterface"
			],
			"Resource": "arn:aws:ec2:us-east-1:<ACCOUNT_ID>:network-interface/eni-027ee3ae382ce08b1"
		}
	]
}